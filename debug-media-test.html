<!DOCTYPE html>
<html>
<head>
    <title>Media URL Test</title>
</head>
<body>
    <h1>Media URL Test</h1>
    
    <h2>Direct Test</h2>
    <img src="/api/media/memory-4OsJBdkrkj8RyijMOG6OR-asaad111-1754848321807-0-post.png" alt="Test Image" style="width: 200px;" onload="console.log('‚úÖ Direct URL works!')" onerror="console.log('‚ùå Direct URL failed!')">
    
    <h2>Console Tests</h2>
    <script>
        // Test direct fetch
        fetch('/api/media/memory-4OsJBdkrkj8RyijMOG6OR-asaad111-1754848321807-0-post.png')
            .then(response => {
                console.log('üì° Fetch response status:', response.status);
                console.log('üì° Fetch response headers:', response.headers);
                if (response.ok) {
                    console.log('‚úÖ Fetch successful - media URL working!');
                } else {
                    console.log('‚ùå Fetch failed:', response.statusText);
                }
            })
            .catch(error => {
                console.error('‚ùå Fetch error:', error);
            });
        
        // Test image load programmatically
        const testImg = new Image();
        testImg.onload = () => console.log('‚úÖ Programmatic image load successful!');
        testImg.onerror = () => console.log('‚ùå Programmatic image load failed!');
        testImg.src = '/api/media/memory-4OsJBdkrkj8RyijMOG6OR-asaad111-1754848321807-0-post.png';
        
        // Test with actual path from database
        fetch('/api/memories/public')
            .then(r => r.json())
            .then(memories => {
                if (memories && memories[0] && memories[0].mediaUrls) {
                    const firstMedia = memories[0].mediaUrls[0];
                    console.log('üîç Database media URL:', firstMedia);
                    
                    const testUrl = `/api/media/${firstMedia}`;
                    console.log('üîç Generated test URL:', testUrl);
                    
                    const dbTestImg = new Image();
                    dbTestImg.onload = () => console.log('‚úÖ Database URL works!', testUrl);
                    dbTestImg.onerror = () => console.log('‚ùå Database URL failed!', testUrl);
                    dbTestImg.src = testUrl;
                }
            })
            .catch(e => console.error('‚ùå Failed to fetch memories:', e));
    </script>
</body>
</html>